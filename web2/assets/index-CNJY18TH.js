var $t=Object.defineProperty;var St=(e,t,a)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var qe=(e,t,a)=>(St(e,typeof t!="symbol"?t+"":t,a),a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();function H(){}function _t(e){return e()}function ct(){return Object.create(null)}function Ie(e){e.forEach(_t)}function yt(e){return typeof e=="function"}function he(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Be;function ft(e,t){return e===t?!0:(Be||(Be=document.createElement("a")),Be.href=t,e===Be.href)}function Ct(e){return Object.keys(e).length===0}function Et(e,...t){if(e==null){for(const l of t)l(void 0);return H}const a=e.subscribe(...t);return a.unsubscribe?()=>a.unsubscribe():a}function Ge(e,t,a){e.$$.on_destroy.push(Et(t,a))}function f(e,t){e.appendChild(t)}function V(e,t,a){e.insertBefore(t,a||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function Ue(e,t){for(let a=0;a<e.length;a+=1)e[a]&&e[a].d(t)}function b(e){return document.createElement(e)}function ce(e){return document.createTextNode(e)}function k(){return ce(" ")}function xe(e,t,a,l){return e.addEventListener(t,a,l),()=>e.removeEventListener(t,a,l)}function r(e,t,a){a==null?e.removeAttribute(t):e.getAttribute(t)!==a&&e.setAttribute(t,a)}function Lt(e){return Array.from(e.childNodes)}function Ne(e,t){t=""+t,e.data!==t&&(e.data=t)}function je(e,t){e.value=t??""}function At(e,t,a,l){a==null?e.style.removeProperty(t):e.style.setProperty(t,a,l?"important":"")}let Oe;function Re(e){Oe=e}function Mt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function kt(e){Mt().$$.on_mount.push(e)}const _e=[],pe=[];let ye=[];const Fe=[],Rt=Promise.resolve();let Ve=!1;function Tt(){Ve||(Ve=!0,Rt.then(wt))}function Ye(e){ye.push(e)}function Ot(e){Fe.push(e)}const He=new Set;let be=0;function wt(){if(be!==0)return;const e=Oe;do{try{for(;be<_e.length;){const t=_e[be];be++,Re(t),zt(t.$$)}}catch(t){throw _e.length=0,be=0,t}for(Re(null),_e.length=0,be=0;pe.length;)pe.pop()();for(let t=0;t<ye.length;t+=1){const a=ye[t];He.has(a)||(He.add(a),a())}ye.length=0}while(_e.length);for(;Fe.length;)Fe.pop()();Ve=!1,He.clear(),Re(e)}function zt(e){if(e.fragment!==null){e.update(),Ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ye)}}function Bt(e){const t=[],a=[];ye.forEach(l=>e.indexOf(l)===-1?t.push(l):a.push(l)),a.forEach(l=>l()),ye=t}const Pe=new Set;let Gt;function O(e,t){e&&e.i&&(Pe.delete(e),e.i(t))}function P(e,t,a,l){if(e&&e.o){if(Pe.has(e))return;Pe.add(e),Gt.c.push(()=>{Pe.delete(e),l&&(a&&e.d(1),l())}),e.o(t)}else l&&l()}function ke(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pt(e,t,a){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=a,a(e.$$.ctx[l]))}function N(e){e&&e.c()}function z(e,t,a){const{fragment:l,after_update:n}=e.$$;l&&l.m(t,a),Ye(()=>{const i=e.$$.on_mount.map(_t).filter(yt);e.$$.on_destroy?e.$$.on_destroy.push(...i):Ie(i),e.$$.on_mount=[]}),n.forEach(Ye)}function B(e,t){const a=e.$$;a.fragment!==null&&(Bt(a.after_update),Ie(a.on_destroy),a.fragment&&a.fragment.d(t),a.on_destroy=a.fragment=null,a.ctx=[])}function Nt(e,t){e.$$.dirty[0]===-1&&(_e.push(e),Tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(e,t,a,l,n,i,o=null,h=[-1]){const c=Oe;Re(e);const s=e.$$={fragment:null,ctx:[],props:i,update:H,not_equal:n,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ct(),dirty:h,skip_bound:!1,root:t.target||c.$$.root};o&&o(s.root);let p=!1;if(s.ctx=a?a(e,t.props||{},(u,y,..._)=>{const C=_.length?_[0]:y;return s.ctx&&n(s.ctx[u],s.ctx[u]=C)&&(!s.skip_bound&&s.bound[u]&&s.bound[u](C),p&&Nt(e,u)),y}):[],s.update(),p=!0,Ie(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const u=Lt(t.target);s.fragment&&s.fragment.l(u),u.forEach(F)}else s.fragment&&s.fragment.c();t.intro&&O(e.$$.fragment),z(e,t.target,t.anchor),wt()}Re(c)}class $e{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){B(this,1),this.$destroy=H}$on(t,a){if(!yt(a))return H;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(a),()=>{const n=l.indexOf(a);n!==-1&&l.splice(n,1)}}$set(t){this.$$set&&!Ct(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const It="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(It);const ve=[];function We(e,t=H){let a;const l=new Set;function n(h){if(he(e,h)&&(e=h,a)){const c=!ve.length;for(const s of l)s[1](),ve.push(s,e);if(c){for(let s=0;s<ve.length;s+=2)ve[s][0](ve[s+1]);ve.length=0}}}function i(h){n(h(e))}function o(h,c=H){const s=[h,c];return l.add(s),l.size===1&&(a=t(n,i)||H),h(e),()=>{l.delete(s),l.size===0&&a&&(a(),a=null)}}return{set:n,update:i,subscribe:o}}const Dt={quality:{key:"quality",value:1,min:0,max:1,step:.25},batchSize:{key:"batchSize",value:1,values:[0,33,66,100],min:1,max:4,step:1},styles:{key:"styles",options:[{value:"ProteusV0.3-LCM",label:"Illustration - Fast"},{value:"ProteusV0.3",label:"Illustration - Accurate"},{value:"ProteusV0.3-LCM-Anime",label:"Anime - Fast"},{value:"ProteusV0.3-Anime",label:"Anime - Accurate"},{value:"DreamShaperXLTurboV2-Cinematic",label:"Cinematic"}],selected:"ProteusV0.3"},settings:{key:"settings",options:[{value:"fantasy",label:"Fantasy"}],selected:"fantasy"},backgrounds:{key:"backgrounds",options:[{value:"",label:"-- undefined --"},{value:"inside a cave",label:"Cave"},{value:"in the desert",label:"Desert"},{value:"inside a dungeon",label:"Dungeon"},{value:"flames in background",label:"Flames"},{value:"forest in background",label:"Forest"},{value:"on a glacier",label:"Glacier"},{value:"magical aura in background",label:"Magical aura"},{value:"mountains in background",label:"Mountains"},{value:"flat plain background",label:"Plain background"},{value:"in the study, scrolls and potions",label:"Study"},{value:"inside a temple",label:"Temple"},{value:"on the streets of an old town",label:"Town"}],selected:""},moods:{key:"moods",options:[{value:"angry evil",label:"Angry"},{value:"wise thoughtful serious mood",label:"Somber"},{value:"",label:"Neutral"},{value:"cunning smirk mood",label:"Cunning"},{value:"serene joyful dreamy",label:"Serene"},{value:"happy jovial (smiling:0.85)",label:"Happy"}],selected:""},colors:{key:"colors",options:[{value:"",label:"-- undefined --"},{value:"burgundy",label:"Burgundy"},{value:"scarlet red",label:"Scarlet"},{value:"pink",label:"Pink"},{value:"beige",label:"Beige"},{value:"brown",label:"Brown"},{value:"orange",label:"Orange"},{value:"yellow",label:"Yellow"},{value:"green",label:"Green"},{value:"emerald",label:"Emerald"},{value:"aquamarine",label:"Aquamarine"},{value:"cerulean",label:"Cerulean"},{value:"blue",label:"Blue"},{value:"purple",label:"Purple"},{value:"magenta",label:"Magenta"},{value:"white",label:"White"},{value:"gray",label:"Gray"},{value:"black",label:"Black"},{value:"bronze",label:"Bronze"},{value:"copper",label:"Copper"},{value:"silver",label:"Silver"},{value:"gold",label:"Gold"}],selected:"random"},gender:{key:"gender",value:0,min:0,max:3,step:1},age:{key:"age",value:1,min:0,max:3,step:1},bodyStructure:{key:"bodyStructure",value:1,min:0,max:3,step:1},race:{key:"race",options:[{value:"",label:"-- undefined --"},{value:"dwarf",label:"Dwarf"},{value:"elf",label:"Elf"},{value:"gnome",label:"Gnome"},{value:"half-elf",label:"Half-Elf"},{value:"half-orc",label:"Half-Orc"},{value:"halfling",label:"Halfling"},{value:"human",label:"Human"},{value:"tiefling",label:"Tiefling"}],selected:""},ethnicity:{key:"ethnicity",options:[{value:"",label:"-- undefined --"},{value:"0",label:"Completely Random"},{value:"1",label:"Africa: Eastern"},{value:"2",label:"Africa: Middle"},{value:"3",label:"Africa: Northern"},{value:"4",label:"Africa: Southern"},{value:"5",label:"Africa: Western"},{value:"6",label:"America: Central"},{value:"7",label:"America: Northern"},{value:"8",label:"America: Southern"},{value:"9",label:"Asia: Central"},{value:"10",label:"Asia: Eastern"},{value:"11",label:"Asia: South-Eastern"},{value:"12",label:"Asia: Southern"},{value:"13",label:"Asia: Western"},{value:"14",label:"Australia &amp; New Zealand"},{value:"15",label:"European: Eastern"},{value:"16",label:"European: Northern"},{value:"17",label:"European: Southern"},{value:"18",label:"European: Western"},{value:"19",label:"European: Islandic"},{value:"21",label:"Mela/Micro/Poly-nesia"}],selected:""},class:{key:"class",options:[{value:"cleric",label:"Cleric"},{value:"fighter",label:"Fighter"},{value:"mage",label:"Mage"},{value:"noble person",label:"Noble person"},{value:"Paladin",label:"Paladin"},{value:"peasant",label:"Peasant"},{value:"ranger",label:"Ranger"},{value:"shaman",label:"Shaman"},{value:"thief",label:"Thief"}],selected:""},armor:{key:"armor",options:[{value:"",label:"-- undefined --"},{value:"casual clothing",label:"Casual clothing"},{value:"elegant garments",label:"Elegant clothing"},{value:"furs clothing",label:"Furs"},{value:"a leather armor",label:"Light armor"},{value:"minimal simple clothing",label:"Minimal"},{value:"an heavy armor",label:"Heavy armor"},{value:"noble clothing",label:"Noble clothing"},{value:"rags",label:"Rags"},{value:"a robe",label:"Robe"}],selected:""},hairStyle:{key:"hairStyle",options:[{value:"",label:"-- undefined --"},{value:"bald",label:"Bald"},{value:"simple braid hairstyle",label:"Braids"},{value:"buzz haircut",label:"Buzz cut"},{value:"cornrows hairstyle",label:"Cornrows"},{value:"long {{COLOR}}curly hair",label:"Curly Long"},{value:"short {{COLOR}}curly hair",label:"Curly Short"},{value:"dreadlocks hairstyle",label:"Dreadlocks"},{value:"long {{COLOR}}hair",label:"Long hair"},{value:"long {{COLOR}}disheveled hair",label:"Long disheveled"},{value:"long {{COLOR}}straight hair",label:"Long straight"},{value:"short mohawk hairstyle",label:"Mohawk"},{value:"pixie haircut",label:"Pixie cut"},{value:"ponytail hairstyle",label:"Ponytail"},{value:"short {{COLOR}}hair",label:"Short hair"},{value:"short {{COLOR}}disheveled hair",label:"Short disheveled"},{value:"short {{COLOR}}straight hair",label:"Short straight"}],selected:""},hairColor:{key:"hairColor",options:[{value:"",label:"-- undefined --"},{value:"blond",label:"Blond"},{value:"dark blond",label:"Dark Blond"},{value:"medium brown",label:"Medium Brown"},{value:"dark brown",label:"Dark Brown"},{value:"reddish brown",label:"Reddish Brown"},{value:"red",label:"Red"},{value:"black",label:"Black"},{value:"canescent",label:"Graying"},{value:"gray",label:"Gray"},{value:"white",label:"White"}],selected:""}};function qt(){const{subscribe:e,update:t}=We(Dt);return{subscribe:e,updateSelected:(a,l)=>{t(n=>{const i=n[a];return i.options?i.selected=l:i.value=l,n})}}}const De=qt(),Te="",Ht="{{SETTING}} {{STYLE}} closeup of a {{AGE}} {{BODY}}{{ETHNICITY}}{{RACE}} {{GENDER}} {{CLASS}}{{HAIR_COLOR}}{{HAIRSTYLE}}{{GEAR}}.{{RACE_HELPER}}{{BACKGROUND}} High quality, detailed, high resolution{{SETTING_HELPER}}.{{MOOD}}{{ATMOSPHERE}}",jt="{{STYLE}}{{RACE}}rendering, blurry, noisy, deformed, text, {{GENDER}}scars, blood, dirty, nipples, naked, boobs, cleavage, face mask, Christmas, garden, zippers, ill, lazy eye, {{BACKGROUND}} author, signature, 3d",Le={1:["Eritrean","Djiboutian","Ethiopian","Somali","Kenyan","Ugandan","Rwandan","Burundian","Tanzanian","Malagasy","Mauritian","Seychellois"],2:["Chadian","Sudanese","Central African","Cameroonian","Gabonese","Equatorial Guinean","Sao Tomean","Angolan","Congolese","Zambian","Malawian","Mozambican","Madagascan","Comorian","Mauritian","Seychellois"],3:["Egyptian","Libyan","Tunisian","Algerian","Moroccan","Mauritanian","Sahrawi","Tuareg"],4:["Namibian","South African","Botswanan","Zimbabwean","Zambian","Malawian","Mozambican","Swazi","Lesotho","Basotho"],5:["Mauritanian","Senegalese","Malian","Nigerien","Burkinabe","Ivorian","Ghanaian","Togolese","Beninese","Nigerian","Cameroonian","Equatorial Guinean","Sao Tomean","Gabonese","Congolese"],6:["Belizean","Costa Rican","Salvadoran","Guatemalan","Honduran","Nicaraguan","Panamanian"],7:["Antiguan","Bahamian","Barbadian","Cuban","Dominican","Dominican","Grenadian","Haitian","Jamaican","Kittian and Nevisian","Lucian","Vincentian","Trinidadian and Tobagonian"],8:["Argentine","Bolivian","Brazilian","Chilean","Colombian","Ecuadorian","Guyanese","Paraguayan","Peruvian","Surinamese","Uruguayan","Venezuelan"],9:["Kazakhstani","Kyrgyzstani","Tajikistani","Turkmen","Uzbekistani"],10:["Chinese","Japanese","Korean","Mongolian","Taiwanese"],11:["Bangladeshi","Bhutanese","Indian","Maldivian","Nepalese","Pakistani","Sri Lankan"],12:["Burmese","Cambodian","Filipino","Indonesian","Laotian","Malaysian","Singaporean","Thai","Timorese","Vietnamese"],13:["Afghan","Armenian","Azerbaijani","Bahraini","Cypriot","Georgian","Iranian","Iraqi","Israeli","Jordanian","Kuwaiti","Lebanese","Omani","Palestinian","Qatari","Saudi","Syrian","Turkish","Emirati","Yemeni"],14:["Australian","Fijian","I-Kiribati","Marshallese","Micronesian","Nauruan","New Zealander","Palauan","Papua New Guinean","Samoan","Solomon Islander","Tongan","Tuvaluan","Vanuatuan"],15:["Belarusian","Bulgarian","Czech","Hungarian","Polish","Moldovan","Romanian","Russian","Slovak","Ukrainian"],16:["Estonian","Latvian","Lithuanian"],17:["Albanian","Bosnian","Croatian","Greek","Italian","Maltese","Montenegrin","North Macedonian","Portuguese","Serbian","Slovenian","Spanish"],18:["Austrian","Belgian","Dutch","French","German","Liechtensteiner","Luxembourger","Monacan","Swiss"],19:["Icelandic","Irish","Manx","British"],21:["Fijian","Papua New Guinean","Solomon Islander","Vanuatuan","Kiribati","Marshallese","Micronesian","Nauruan","Palauan","Samoan","Tongan","Tuvaluan"]};function Ft(e){return function(){e|=0,e=e+2654435769|0;var t=e^e>>>16;return t=Math.imul(t,569420461),t=t^t>>>15,t=Math.imul(t,1935289751),((t=t^t>>>15)>>>0)/4294967296}}function Vt(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function Yt(){return Math.floor(Math.random()*9999999999)}const Ke=We(!1);function Kt(){const{subscribe:e,set:t,update:a}=We({client_id:"",workflows:{},available_checkpoints:{},results:[]}),l=Vt();async function n(){let c={basic_portrait:"/workflows/basic_portrait.json",basic_portrait_lcm:"/workflows/basic_portrait_lcm.json"};for(let s in c){let p=await fetch(c[s]);c[s]=await p.json()}return c}async function i(){let c=await fetch(Te+"/object_info/CheckpointLoaderSimple",{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}});c=await c.json();let s=c.CheckpointLoaderSimple.input.required.ckpt_name[0];const p={DreamShaperXLTurboV2:/.*dreamshaper.*xl.*turbo.*v2.*\.safetensors$/gi,"ProteusV0.3":/.*proteus.*0\.3.*\.safetensors$/gi};let u={};for(let y in p)u[y]="",s.forEach(_=>{p[y].test(_)&&(u[y]=_)});return u}async function o(c={}){Ke.set(!0);const s={prompt:c,client_id:l};return await(await fetch(Te+"/prompt",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}async function h(){return await(await fetch(Te+"/interrupt",{method:"POST",cache:"no-cache",headers:{"Content-Type":"text/html"}})).json()}return{init:async()=>{const c=await n(),s=await i();t({workflows:c,client_id:l,available_checkpoints:s,results:[]})},updateResults:c=>{a(s=>(s.results=c,s))},interrupt:h,queue_prompt:o,subscribe:e}}const Me=Kt();function Ut(e){let t;return{c(){t=b("div"),t.innerHTML='<div class="uk-modal-dialog uk-modal-body"><h2 class="uk-modal-title">An error occurred</h2> <p id="modal-message"></p> <p class="uk-text-center"><button class="uk-button uk-button-default uk-modal-close" type="button">Close</button></p></div>',r(t,"id","app-modal"),r(t,"uk-modal","")},m(a,l){V(a,t,l),e[1](t)},p:H,i:H,o:H,d(a){a&&F(t),e[1](null)}}}function xt(e,t,a){let{modal:l}=t;function n(i){pe[i?"unshift":"push"](()=>{l=i,a(0,l)})}return e.$$set=i=>{"modal"in i&&a(0,l=i.modal)},[l,n]}class Wt extends $e{constructor(t){super(),we(this,t,xt,Ut,he,{modal:0})}}function dt(e,t,a){const l=e.slice();return l[15]=t[a].href,l[16]=t[a].img,l}function pt(e){let t,a;return{c(){t=b("span"),a=b("span"),r(t,"id","main-spinner"),r(t,"uk-spinner","ratio: 0.7"),r(a,"id","roll-icon"),r(a,"uk-icon","icon: bolt")},m(l,n){V(l,t,n),V(l,a,n)},d(l){l&&(F(t),F(a))}}}function ht(e){let t,a,l,n,i,o,h;return{c(){t=b("div"),a=b("a"),l=b("img"),o=k(),ft(l.src,n=e[16])||r(l,"src",n),r(l,"width","1024"),r(l,"height","1024"),r(l,"alt",""),r(a,"href",i=e[15]),r(a,"data-type","image"),r(t,"class",h=e[4].results.length>1?"uk-width-1-2":"")},m(c,s){V(c,t,s),f(t,a),f(a,l),f(t,o)},p(c,s){s&16&&!ft(l.src,n=c[16])&&r(l,"src",n),s&16&&i!==(i=c[15])&&r(a,"href",i),s&16&&h!==(h=c[4].results.length>1?"uk-width-1-2":"")&&r(t,"class",h)},d(c){c&&F(t)}}}function Jt(e){let t,a,l,n,i,o,h,c,s,p,u,y,_,C,K,U,x,v,Y;function I(m){e[7](m)}let D={};e[3]!==void 0&&(D.modal=e[3]),t=new Wt({props:D}),pe.push(()=>Pt(t,"modal",I));let L=e[5]&&pt(),w=ke(e[4].results),R=[];for(let m=0;m<w.length;m+=1)R[m]=ht(dt(e,w,m));return{c(){N(t.$$.fragment),l=k(),n=b("div"),i=b("progress"),o=k(),h=b("div"),c=b("form"),s=b("button"),L&&L.c(),p=ce("Â Roll"),u=b("input"),y=b("label"),_=ce("Random "),C=b("input"),K=k(),U=b("div");for(let m=0;m<R.length;m+=1)R[m].c();r(i,"id","main-progress"),r(i,"class","progress"),i.value="0",r(i,"max","0"),r(s,"id","roll"),r(s,"class","uk-button uk-button-danger"),r(s,"type","button"),r(u,"id","main-seed"),r(u,"class","uk-input"),r(u,"type","text"),r(u,"placeholder","Seed"),r(u,"aria-label","Seed"),u.value="0",r(C,"id","is-random"),r(C,"class","uk-checkbox"),r(C,"type","checkbox"),C.checked=!0,r(h,"class","uk-text-center uk-container uk-container-expand"),r(U,"class","uk-child-width-expand uk-text-center"),r(U,"uk-grid",""),r(U,"uk-lightbox",""),r(n,"id","content"),r(n,"class","uk-light"),r(n,"data-uk-height-viewport","expand: true")},m(m,g){z(t,m,g),V(m,l,g),V(m,n,g),f(n,i),e[8](i),f(n,o),f(n,h),f(h,c),f(c,s),L&&L.m(s,null),f(s,p),f(c,u),e[9](u),f(c,y),f(y,_),f(y,C),e[10](C),f(n,K),f(n,U);for(let $=0;$<R.length;$+=1)R[$]&&R[$].m(U,null);x=!0,v||(Y=xe(s,"click",e[6]),v=!0)},p(m,[g]){const $={};if(!a&&g&8&&(a=!0,$.modal=m[3],Ot(()=>a=!1)),t.$set($),m[5]?L||(L=pt(),L.c(),L.m(s,p)):L&&(L.d(1),L=null),g&16){w=ke(m[4].results);let T;for(T=0;T<w.length;T+=1){const E=dt(m,w,T);R[T]?R[T].p(E,g):(R[T]=ht(E),R[T].c(),R[T].m(U,null))}for(;T<R.length;T+=1)R[T].d(1);R.length=w.length}},i(m){x||(O(t.$$.fragment,m),x=!0)},o(m){P(t.$$.fragment,m),x=!1},d(m){m&&(F(l),F(n)),B(t,m),e[8](null),L&&L.d(),e[9](null),e[10](null),Ue(R,m),v=!1,Y()}}}function Zt(e,t,a){let l,n,i;Ge(e,De,v=>a(12,l=v)),Ge(e,Me,v=>a(4,n=v)),Ge(e,Ke,v=>a(5,i=v));let o,h,c,s,p;function u(){p=new Date}function y(v=0,Y=0){a(2,c.max=v,c),a(2,c.value=Y,c)}kt(async()=>{function v(){return p?(new Date().getTime()-p)/1e3:0}let Y=window.location.hostname+":"+window.location.port;h.addEventListener("change",L=>{h.checked?a(0,o.disabled=!0,o):a(0,o.disabled=!1,o)});const I=window.location.protocol==="https:"?"wss:":"ws:",D=new WebSocket(I+"//"+Y+"/ws?clientId="+n.client_id);console.log(D),D.addEventListener("open",L=>{console.log("Connected to the server")}),D.addEventListener("message",L=>{const w=JSON.parse(L.data);if(console.log(w),w.type==="progress")y(w.data.max,w.data.value);else if(w.type==="executed"){const R=v();if(console.log("Execution time: "+R+"s"),"images"in w.data.output){const m=w.data.output.images;m.length>1;const g=[];for(let $=0;$<m.length;$++){const T=m[$].filename,E=m[$].subfolder,A=Math.random(),se=`${Te}/view?filename=${T}&type=output&subfolder=${E}&rand=${A}`,S=`${Te}/view?filename=${T}&type=output&subfolder=${E}&rand=${A}`;console.log(se,S),g.push({href:se,img:S})}Me.updateResults(g)}}else w.type==="execution_interrupted"?console.log("Execution Interrupted"):w.type==="status"&&(Ke.set(w.data.status.exec_info.queue_remaining>0),y())})});async function _(){if(i)await Me.interrupt();else{let v=structuredClone(n.workflows.basic_portrait),Y=14,I=14,D="dpmpp_2m",L="exponential",w=6.5,m=l.styles.selected,g=Ht,$=jt,T=l.settings.selected,E=String(l.bodyStructure.value),A=l.race.selected,se="",S="",q=String(l.age.value),j=String(l.gender.value),W="",ze=l.class.selected,J=l.armor.selected,te=l.hairStyle.selected,G=l.hairStyle.selected,fe=l.backgrounds.selected,Z=l.moods.selected,me=l.colors.selected,X=l.ethnicity.selected,Se="",le="",de="",Q="",Ce=!1,ee=o.value;h.checked&&(ee=Yt(),a(0,o.value=ee,o));let oe=Ft(ee);m.includes("-Cinematic")?(de="film still cinematic photo",Q="illustration, anime, cosplay, ",Ce=!0):m.includes("-Anime")?(de="anime illustration",Q="photo, fanart, "):(de="illustration digital painting",Q="photo, anime, "),g=g.replace("{{STYLE}}",de),$=$.replace("{{STYLE}}",Q),T==="fantasy"&&(g=g.replace("{{SETTING}}","fantasy"),Ce?g=g.replace("{{SETTING_HELPER}}",", (D&D:1.1), Lord of the rings"):g=g.replace("{{SETTING_HELPER}}",", (D&D:1.1), (Lord of the rings:0.8)")),E=="0"?E="slender ":E=="1"?(E="",(A==="halfling"||A==="gnome"||A==="dwarf")&&(E="stocky ")):E=="2"?(j=="0"||j=="1"?E="strong muscular ":E="strong ",(A==="halfling"||A==="gnome"||A==="dwarf")&&(E="stocky "+E)):E=="3"&&(E="chubby ",(A==="halfling"||A==="gnome"||A==="dwarf")&&(E="stocky "+E)),g=g.replace("{{BODY}}",E),A==="human"?S="(elf, long pointy ears:1.2), ":A==="half-elf"||A==="halfling"?se=" pointy ears.":A==="elven"&&(S="green, beard, "),g=g.replace("{{RACE}}",A),g=g.replace("{{RACE_HELPER}}",se),$=$.replace("{{RACE}}",S),q=="0"?q="young":q=="1"?q="30yo":q=="2"?q="45yo":q=="3"&&(q="60yo"),g=g.replace("{{AGE}}",q),j=="0"?(j="female",W="horror, "):j=="1"?(j="(masculine:1.1) female",A!=="elven"&&(W="beard, ")):j=="2"?(j="(queer:0.9) feminine male",W="zombie, beard, "):j=="3"&&(j="male"),g=g.replace("{{GENDER}}",j),$=$.replace("{{GENDER}}",W),g=g.replace("{{CLASS}}",ze),J!==""&&(J=" wearing "+J),g=g.replace("{{GEAR}}",J),G==="bald"&&(te=""),G==="simple braid hairstyle"&&(j.includes("female")?G="(simple braid hairstyle:0.7)":G="simple braid hairstyle"),te!==""&&(G.includes("{{COLOR}}")?(te=" with "+G.replace("{{COLOR}}",te+" "),G=""):te=" with "+te+" hair"),g=g.replace("{{HAIR_COLOR}}",te),G=G.replace("{{COLOR}}",""),G!==""&&(te!==""?G=" and "+G:G=" with "+G),g=g.replace("{{HAIRSTYLE}}",G),fe!==""&&(fe=" "+fe+".",le="flat background, "),g=g.replace("{{BACKGROUND}}",fe),$=$.replace("{{BACKGROUND}}",le);let ne=!!m.includes("-LCM"),Ee=!!m.includes("Turbo");if(m=m.replace("-LCM",""),m=m.replace("-Anime",""),m=m.replace("-Cinematic",""),(ne||Ee)&&(Y=4,I=4),ne&&(v=structuredClone(n.workflows.basic_portrait_lcm),w=2.5,D="lcm",L="normal"),Ee&&(w=2),Z!==""&&(Z=" "+Z,me=", "+me),g=g.replace("{{MOOD}}",Z),g=g.replace("{{ATMOSPHERE}}",me),X!==""){let ie,d,M,re;if(X==="0"){let ue=Object.keys(Le);M=Le[ue[Math.floor(oe()*ue.length)]],re=Le[ue[Math.floor(oe()*ue.length)]]}else M=Le[X],re=Le[X];for(ie=M[Math.floor(oe()*M.length)],d=re[Math.floor(oe()*re.length)];ie===d;)d=re[Math.floor(oe()*re.length)];console.log("Ethnicity: "+ie+", "+d),Se="("+ie+", "+d+":0.7) "}g=g.replace("{{ETHNICITY}}",Se),m==="DreamShaperXLTurboV2"&&(D="dpmpp_sde",v[14]={inputs:{multiplier:.7,model:["1",0]},class_type:"RescaleCFG",_meta:{title:"RescaleCFG"}},v[7].inputs.model=["14",0],w=4,Y=6,L="karras"),v[1].inputs.ckpt_name=n.available_checkpoints[m],v[7].inputs.sampler_name=D,v[7].inputs.scheduler=L,v[7].inputs.seed=ee,v[7].inputs.steps=Y+Math.round(l.quality.value*I),v[7].inputs.cfg=w,v[6].inputs.batch_size=l.batchSize.value,v[4].inputs.text=g,v[5].inputs.text=$,u();let ge=await Me.queue_prompt(v);v=null,"error"in ge&&(y(),UIkit.modal(s).show(),console.log("Error: "+ge.error.message))}}function C(v){s=v,a(3,s)}function K(v){pe[v?"unshift":"push"](()=>{c=v,a(2,c)})}function U(v){pe[v?"unshift":"push"](()=>{o=v,a(0,o)})}function x(v){pe[v?"unshift":"push"](()=>{h=v,a(1,h)})}return[o,h,c,s,n,i,_,C,K,U,x]}class Xt extends $e{constructor(t){super(),we(this,t,Zt,Jt,he,{})}}function mt(e,t,a){const l=e.slice();return l[8]=t[a],l[12]=a,l}function Qt(e){let t,a,l,n=e[1][0]+"",i,o,h,c=e[1][1]+"",s,p;return{c(){t=b("div"),a=b("div"),l=b("span"),i=ce(n),o=k(),h=b("div"),s=ce(c),p=b("span"),r(l,"uk-icon","icon: arrow-left"),r(a,"class","uk-width-1-2@s"),r(p,"uk-icon","icon: arrow-right"),r(h,"class","uk-width-1-2@s"),At(h,"text-align","right"),r(t,"class","uk-form-label uk-text-muted"),r(t,"uk-grid","")},m(u,y){V(u,t,y),f(t,a),f(a,l),f(a,i),f(t,o),f(t,h),f(h,s),f(h,p)},p(u,y){y&2&&n!==(n=u[1][0]+"")&&Ne(i,n),y&2&&c!==(c=u[1][1]+"")&&Ne(s,c)},d(u){u&&F(t)}}}function ea(e){let t,a=ke(e[1]),l=[];for(let n=0;n<a.length;n+=1)l[n]=gt(mt(e,a,n));return{c(){t=b("datalist");for(let n=0;n<l.length;n+=1)l[n].c();r(t,"id","batch-size-values"),r(t,"class","uk-form-label uk-text-muted")},m(n,i){V(n,t,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(n,i){if(i&2){a=ke(n[1]);let o;for(o=0;o<a.length;o+=1){const h=mt(n,a,o);l[o]?l[o].p(h,i):(l[o]=gt(h),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},d(n){n&&F(t),Ue(l,n)}}}function gt(e){let t,a;return{c(){t=b("option"),t.__value=a=e[8],je(t,t.__value),r(t,"label",String(e[12]+1))},m(l,n){V(l,t,n)},p(l,n){n&2&&a!==(a=l[8])&&(t.__value=a,je(t,t.__value))},d(l){l&&F(t)}}}function ta(e){let t,a,l,n,i,o,h,c,s,p=e[7]&&Qt(e),u=!e[7]&&ea(e);return{c(){t=b("div"),a=b("label"),l=ce(e[0]),n=k(),i=b("input"),o=k(),p&&p.c(),h=k(),u&&u.c(),r(a,"class","uk-form-label"),r(a,"for",e[2]+"-input"),r(i,"class","uk-range"),r(i,"id",e[2]+"-input"),r(i,"type","range"),i.value=e[8],r(i,"min",e[3]),r(i,"max",e[4]),r(i,"step",e[5]),r(i,"aria-label","Range"),r(t,"class","uk-width-1-2@s")},m(y,_){V(y,t,_),f(t,a),f(a,l),f(t,n),f(t,i),f(t,o),p&&p.m(t,null),f(t,h),u&&u.m(t,null),c||(s=xe(i,"change",e[6]),c=!0)},p(y,[_]){_&1&&Ne(l,y[0]),y[7]&&p.p(y,_),y[7]||u.p(y,_)},i:H,o:H,d(y){y&&F(t),p&&p.d(),u&&u.d(),c=!1,s()}}}function aa(e,t,a){let{props:l}=t;const{key:n,value:i,min:o,max:h,step:c,values:s}=l;let{label:p}=t,{bottomLabels:u}=t;function y(C){De.updateSelected(n,C.target.value)}const _=u.length===2;return e.$$set=C=>{"props"in C&&a(9,l=C.props),"label"in C&&a(0,p=C.label),"bottomLabels"in C&&a(1,u=C.bottomLabels)},[p,u,n,o,h,c,y,_,i,l]}class Ae extends $e{constructor(t){super(),we(this,t,aa,ta,he,{props:9,label:0,bottomLabels:1})}}function bt(e,t,a){const l=e.slice();return l[8]=t[a],l}function vt(e){let t,a=e[8].label+"",l;return{c(){t=b("option"),l=ce(a),t.__value=e[8].value,je(t,t.__value),t.selected=e[8].value===e[3]},m(n,i){V(n,t,i),f(t,l)},p:H,d(n){n&&F(t)}}}function la(e){let t,a,l,n,i,o,h,c,s=ke(e[2]),p=[];for(let u=0;u<s.length;u+=1)p[u]=vt(bt(e,s,u));return{c(){t=b("div"),a=b("label"),l=ce(e[0]),n=k(),i=b("div"),o=b("select");for(let u=0;u<p.length;u+=1)p[u].c();r(a,"class","uk-form-label"),r(a,"for",e[1]+"-input"),r(o,"class","uk-select"),r(o,"id",e[1]+"-input"),r(o,"aria-label","Select"),r(i,"class","uk-form-controls"),r(t,"class",e[5])},m(u,y){V(u,t,y),f(t,a),f(a,l),f(t,n),f(t,i),f(i,o);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(o,null);h||(c=xe(o,"change",e[4]),h=!0)},p(u,[y]){if(y&1&&Ne(l,u[0]),y&12){s=ke(u[2]);let _;for(_=0;_<s.length;_+=1){const C=bt(u,s,_);p[_]?p[_].p(C,y):(p[_]=vt(C),p[_].c(),p[_].m(o,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=s.length}},i:H,o:H,d(u){u&&F(t),Ue(p,u),h=!1,c()}}}function na(e,t,a){let{props:l}=t;const{key:n,options:i,selected:o}=l;let{label:h}=t,{size:c="full-width"}=t;function s(u){De.updateSelected(n,u.target.value)}const p=c==="full-width"?"uk-width-1-1@s":"uk-width-1-2@s";return e.$$set=u=>{"props"in u&&a(6,l=u.props),"label"in u&&a(0,h=u.label),"size"in u&&a(7,c=u.size)},[h,n,i,o,s,p,l,c]}class ae extends $e{constructor(t){super(),we(this,t,na,la,he,{props:6,label:0,size:7})}}function ia(e){let t,a,l,n,i,o,h,c,s,p,u,y,_,C,K,U,x,v,Y,I,D,L,w,R,m,g,$,T,E,A,se,S,q,j,W,ze,J,te,G,fe,Z,me,X,Se,le,de,Q,Ce,ee,oe,ne,Ee,ge,ie;return u=new Ae({props:{label:"Quality",props:e[0].quality,bottomLabels:["Speed","Accuracy"]}}),_=new Ae({props:{label:"Results per generation",props:e[0].batchSize,bottomLabels:e[0].batchSize.values}}),K=new ae({props:{label:"Preset",props:e[0].styles}}),D=new ae({props:{label:"Setting",props:e[0].settings,size:"half-width"}}),w=new ae({props:{label:"Background",props:e[0].backgrounds,size:"half-width"}}),m=new ae({props:{label:"Mood",props:e[0].moods,size:"half-width"}}),$=new ae({props:{label:"Color",props:e[0].colors,size:"half-width"}}),q=new Ae({props:{label:"Gender",props:e[0].gender,bottomLabels:["Femininity","Masculinity"]}}),W=new Ae({props:{label:"Age",props:e[0].age,bottomLabels:["Young","Old"]}}),J=new Ae({props:{label:"Body Structure",props:e[0].bodyStructure,bottomLabels:["Slender","Chubby"]}}),Z=new ae({props:{label:"Race",props:e[0].race,size:"half-width"}}),X=new ae({props:{label:"Ethnic Bias",props:e[0].ethnicity,size:"half-width"}}),le=new ae({props:{label:"Class",props:e[0].class,size:"half-width"}}),Q=new ae({props:{label:"Clothing/Armor",props:e[0].armor,size:"half-width"}}),ee=new ae({props:{label:"Hair Style",props:e[0].hairStyle,size:"half-width"}}),ne=new ae({props:{label:"Hair Color",props:e[0].hairColor,size:"half-width"}}),{c(){t=b("aside"),a=b("h4"),a.innerHTML="Comfy Dungeon<small><sup>v0.1.1</sup></small>",l=k(),n=b("div"),i=b("form"),o=b("div"),h=b("div"),c=b("a"),c.textContent="Generation params",s=k(),p=b("div"),N(u.$$.fragment),y=k(),N(_.$$.fragment),C=k(),N(K.$$.fragment),U=k(),x=b("div"),v=b("a"),v.textContent="Scene",Y=k(),I=b("div"),N(D.$$.fragment),L=k(),N(w.$$.fragment),R=k(),N(m.$$.fragment),g=k(),N($.$$.fragment),T=k(),E=b("div"),A=b("a"),A.textContent="Character",se=k(),S=b("div"),N(q.$$.fragment),j=k(),N(W.$$.fragment),ze=k(),N(J.$$.fragment),te=k(),G=b("div"),fe=k(),N(Z.$$.fragment),me=k(),N(X.$$.fragment),Se=k(),N(le.$$.fragment),de=k(),N(Q.$$.fragment),Ce=k(),N(ee.$$.fragment),oe=k(),N(ne.$$.fragment),Ee=k(),ge=b("div"),ge.innerHTML=`<a class="uk-accordion-title" href="">Custom</a> <div class="uk-accordion-content uk-grid-small" uk-grid=""><div class="uk-width-1-1@s"><label class="uk-form-label" for="custom-input">Custom prompt</label> <button uk-icon="icon: question" type="button"></button> <div class="uk-card uk-card-small uk-card-body uk-card-default" uk-drop="pos: right-top; mode: click;">Keep it simple. Don&#39;t be too discoursive, write the element that you&#39;d want to add. Eg: &quot;red scarf&quot; or
                &quot;silver tiara&quot;. You might need to add strength with the syntax &quot;(silver tiara:1.2)&quot;.<br/>If the element
                is generic and could be misinterpreted try to give context. Eg: instead of &quot;crown&quot; try with &quot;wearing a
                silver crown on his head&quot;.</div> <div class="uk-form-controls"><textarea name="custom-input" class="uk-textarea" id="custom-input" rows="3" placeholder="Add a custom element" aria-label="Textarea"></textarea></div></div></div>`,r(a,"class","uk-text-center uk-margin-remove-vertical text-light"),r(c,"class","uk-accordion-title"),r(c,"href",""),r(p,"class","uk-accordion-content uk-grid-small"),r(p,"uk-grid",""),r(v,"class","uk-accordion-title"),r(v,"href",""),r(I,"class","uk-accordion-content uk-grid-small"),r(I,"uk-grid",""),r(A,"class","uk-accordion-title"),r(A,"href",""),r(G,"class","width-1-2@s"),r(S,"class","uk-accordion-content uk-grid-small"),r(S,"uk-grid",""),r(o,"uk-accordion","collapsible: false"),r(i,"class","uk-grid-small"),r(n,"class","left-content-box left-nav-wrap"),r(t,"id","left-col"),r(t,"class","uk-light uk-visible@m")},m(d,M){V(d,t,M),f(t,a),f(t,l),f(t,n),f(n,i),f(i,o),f(o,h),f(h,c),f(h,s),f(h,p),z(u,p,null),f(p,y),z(_,p,null),f(p,C),z(K,p,null),f(o,U),f(o,x),f(x,v),f(x,Y),f(x,I),z(D,I,null),f(I,L),z(w,I,null),f(I,R),z(m,I,null),f(I,g),z($,I,null),f(o,T),f(o,E),f(E,A),f(E,se),f(E,S),z(q,S,null),f(S,j),z(W,S,null),f(S,ze),z(J,S,null),f(S,te),f(S,G),f(S,fe),z(Z,S,null),f(S,me),z(X,S,null),f(S,Se),z(le,S,null),f(S,de),z(Q,S,null),f(S,Ce),z(ee,S,null),f(S,oe),z(ne,S,null),f(o,Ee),f(o,ge),ie=!0},p(d,[M]){const re={};M&1&&(re.props=d[0].quality),u.$set(re);const ue={};M&1&&(ue.props=d[0].batchSize),M&1&&(ue.bottomLabels=d[0].batchSize.values),_.$set(ue);const Je={};M&1&&(Je.props=d[0].styles),K.$set(Je);const Ze={};M&1&&(Ze.props=d[0].settings),D.$set(Ze);const Xe={};M&1&&(Xe.props=d[0].backgrounds),w.$set(Xe);const Qe={};M&1&&(Qe.props=d[0].moods),m.$set(Qe);const et={};M&1&&(et.props=d[0].colors),$.$set(et);const tt={};M&1&&(tt.props=d[0].gender),q.$set(tt);const at={};M&1&&(at.props=d[0].age),W.$set(at);const lt={};M&1&&(lt.props=d[0].bodyStructure),J.$set(lt);const nt={};M&1&&(nt.props=d[0].race),Z.$set(nt);const it={};M&1&&(it.props=d[0].ethnicity),X.$set(it);const rt={};M&1&&(rt.props=d[0].class),le.$set(rt);const st={};M&1&&(st.props=d[0].armor),Q.$set(st);const ot={};M&1&&(ot.props=d[0].hairStyle),ee.$set(ot);const ut={};M&1&&(ut.props=d[0].hairColor),ne.$set(ut)},i(d){ie||(O(u.$$.fragment,d),O(_.$$.fragment,d),O(K.$$.fragment,d),O(D.$$.fragment,d),O(w.$$.fragment,d),O(m.$$.fragment,d),O($.$$.fragment,d),O(q.$$.fragment,d),O(W.$$.fragment,d),O(J.$$.fragment,d),O(Z.$$.fragment,d),O(X.$$.fragment,d),O(le.$$.fragment,d),O(Q.$$.fragment,d),O(ee.$$.fragment,d),O(ne.$$.fragment,d),ie=!0)},o(d){P(u.$$.fragment,d),P(_.$$.fragment,d),P(K.$$.fragment,d),P(D.$$.fragment,d),P(w.$$.fragment,d),P(m.$$.fragment,d),P($.$$.fragment,d),P(q.$$.fragment,d),P(W.$$.fragment,d),P(J.$$.fragment,d),P(Z.$$.fragment,d),P(X.$$.fragment,d),P(le.$$.fragment,d),P(Q.$$.fragment,d),P(ee.$$.fragment,d),P(ne.$$.fragment,d),ie=!1},d(d){d&&F(t),B(u),B(_),B(K),B(D),B(w),B(m),B($),B(q),B(W),B(J),B(Z),B(X),B(le),B(Q),B(ee),B(ne)}}}function ra(e,t,a){let l;return Ge(e,De,n=>a(0,l=n)),[l]}class sa extends $e{constructor(t){super(),we(this,t,ra,ia,he,{})}}function oa(e){let t,a,l,n;return t=new sa({}),l=new Xt({}),{c(){N(t.$$.fragment),a=k(),N(l.$$.fragment)},m(i,o){z(t,i,o),V(i,a,o),z(l,i,o),n=!0},p:H,i(i){n||(O(t.$$.fragment,i),O(l.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),P(l.$$.fragment,i),n=!1},d(i){i&&F(a),B(t,i),B(l,i)}}}function ua(e){return kt(async()=>{Me.init()}),[]}class ca extends $e{constructor(t){super(),we(this,t,ua,oa,he,{})}}new ca({target:document.getElementById("app")});
